{"ast":null,"code":"import{BrowserRouter as Router,Routes,Route}from\"react-router-dom\";import{useEffect,useState}from\"react\";import axios from\"axios\";import Table from\"./components/Table\";import Sort from\"./components/Sort\";import Genre from\"./components/Genre\";import Pagination from\"./components/Pagination\";import Search from\"./components/Search\";import AudiobookDetail from\"./components/AudiobookDetail\";import\"./App.css\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const base_url=process.env.REACT_APP_API_URL;function App(){const[obj,setObj]=useState({});const[sort,setSort]=useState({sort:\"rating\",order:\"desc\"});const[filterGenre,setFilterGenre]=useState([]);const[page,setPage]=useState(1);const[search,setSearch]=useState(\"\");useEffect(()=>{const getAllAudiobooks=async()=>{try{const url=\"\".concat(base_url,\"?page=\").concat(page,\"&sort=\").concat(sort.sort,\",\").concat(sort.order,\"&genre=\").concat(filterGenre.toString(),\"&search=\").concat(search);const{data}=await axios.get(url);setObj(data);}catch(err){console.error(\"Failed to fetch audiobooks:\",err);}};getAllAudiobooks();},[sort,filterGenre,page,search]);return/*#__PURE__*/_jsx(Router,{children:/*#__PURE__*/_jsx(\"div\",{className:\"wrapper\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"head\",children:/*#__PURE__*/_jsx(\"button\",{className:\"login_button\",children:\"Login\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"body\",children:/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsx(Route,{path:\"/\",element:/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"table_container\",children:[/*#__PURE__*/_jsx(Table,{audiobooks:obj.audiobooks?obj.audiobooks:[]}),/*#__PURE__*/_jsx(Pagination,{page:page,limit:obj.limit||0,total:obj.total||0,setPage:setPage})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"filter_container\",children:[/*#__PURE__*/_jsx(Search,{setSearch:setSearch}),/*#__PURE__*/_jsx(Sort,{sort:sort,setSort:setSort}),/*#__PURE__*/_jsx(Genre,{filterGenre:filterGenre,genres:obj.genres||[],setFilterGenre:setFilterGenre})]})]})}),/*#__PURE__*/_jsx(Route,{path:\"/audiobook/:id\",element:/*#__PURE__*/_jsx(AudiobookDetail,{})})]})})]})})});}export default App;","map":{"version":3,"names":["BrowserRouter","Router","Routes","Route","useEffect","useState","axios","Table","Sort","Genre","Pagination","Search","AudiobookDetail","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","base_url","process","env","REACT_APP_API_URL","App","obj","setObj","sort","setSort","order","filterGenre","setFilterGenre","page","setPage","search","setSearch","getAllAudiobooks","url","concat","toString","data","get","err","console","error","children","className","path","element","audiobooks","limit","total","genres"],"sources":["C:/Users/dell/audiobook-rating/client/src/App.js"],"sourcesContent":["import { BrowserRouter as Router, Routes, Route } from \"react-router-dom\";\nimport { useEffect, useState } from \"react\";\nimport axios from \"axios\";\nimport Table from \"./components/Table\";\nimport Sort from \"./components/Sort\";\nimport Genre from \"./components/Genre\";\nimport Pagination from \"./components/Pagination\";\nimport Search from \"./components/Search\";\nimport AudiobookDetail from \"./components/AudiobookDetail\";\nimport \"./App.css\";\n\nconst base_url = process.env.REACT_APP_API_URL;\n\nfunction App() {\n  const [obj, setObj] = useState({});\n  const [sort, setSort] = useState({ sort: \"rating\", order: \"desc\" });\n  const [filterGenre, setFilterGenre] = useState([]);\n  const [page, setPage] = useState(1);\n  const [search, setSearch] = useState(\"\");\n\n  useEffect(() => {\n    const getAllAudiobooks = async () => {\n      try {\n        const url = `${base_url}?page=${page}&sort=${sort.sort},${sort.order\n          }&genre=${filterGenre.toString()}&search=${search}`;\n        const { data } = await axios.get(url);\n        setObj(data);\n      } catch (err) {\n        console.error(\"Failed to fetch audiobooks:\", err);\n      }\n    };\n\n    getAllAudiobooks();\n  }, [sort, filterGenre, page, search]);\n\n  return (\n    <Router>\n      <div className=\"wrapper\">\n        <div className=\"container\">\n          <div className=\"head\">\n            <button className=\"login_button\">Login</button>\n          </div>\n          <div className=\"body\">\n            <Routes>\n              <Route\n                path=\"/\"\n                element={\n                  <>\n                    <div className=\"table_container\">\n                      <Table audiobooks={obj.audiobooks ? obj.audiobooks : []} />\n                      <Pagination\n                        page={page}\n                        limit={obj.limit || 0}\n                        total={obj.total || 0}\n                        setPage={setPage}\n                      />\n                    </div>\n                    <div className=\"filter_container\">\n                      <Search setSearch={setSearch} />\n                      <Sort sort={sort} setSort={setSort} />\n                      <Genre\n                        filterGenre={filterGenre}\n                        genres={obj.genres || []}\n                        setFilterGenre={setFilterGenre}\n                      />\n                    </div>\n                  </>\n                }\n              />\n              <Route path=\"/audiobook/:id\" element={<AudiobookDetail />} />\n            </Routes>\n          </div>\n        </div>\n      </div>\n    </Router>\n  );\n}\n\nexport default App;\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}